<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>عروض الأردن</title>
  <style>
    body { font-family: sans-serif; background: #111827; color: #e5e7eb; margin:0; text-align:center;}
    header { padding:20px; background:#1f2937;}
    h1 { margin:0;}
    .search-box { width:70%; padding:10px; border-radius:8px; border:none; font-size:16px;}
    .card { background:#1f2937; padding:16px; border-radius:12px; margin:16px; display:inline-block; width:250px; vertical-align:top; color:#fff;}
    .card img { width:100%; border-radius:12px; margin-bottom:12px;}
    a.btn { display:inline-block; padding:8px 12px; background:#22c55e; color:#062a16; border-radius:12px; text-decoration:none; margin:4px;}
    a.btn:hover { background:#16a34a;}
    a.menu-btn { display:block; width:220px; margin:8px auto; padding:10px; background:#2563eb; color:#fff; border-radius:12px; text-decoration:none; font-weight:bold;}
    a.menu-btn:hover { background:#1d4ed8;}
    .hidden { display:none;}
  </style>
</head>
<body>

<header><h1>مرحبا في موقع عروض الأردن</h1></header>

<div id="content">
  <div id="home">
    <input type="text" placeholder="ابحث عن مطعم..." class="search-box">
    <br><br>
    <a href="#" class="menu-btn" onclick="showPage('list')">اذهب إلى قائمة المطاعم</a>
    <a href="#" class="menu-btn" onclick="alert('مشاركة البحث غير مفعلة حالياً')">مشاركة البحث</a>
  </div>

  <div id="list" class="hidden"></div>
  <div id="restaurant" class="hidden"></div>
</div>

<script>
const sheetID = 'YOUR_SHEET_ID'; // ضع هنا الـ ID الخاص بالـ Google Sheet
const sheetURL = `https://spreadsheets.google.com/feeds/list/${sheetID}/od6/public/values?alt=json`;

let offers = [];

const homeDiv = document.getElementById('home');
const listDiv = document.getElementById('list');
const restaurantDiv = document.getElementById('restaurant');

function showPage(page, index=null){
  homeDiv.classList.add('hidden');
  listDiv.classList.add('hidden');
  restaurantDiv.classList.add('hidden');
  if(page==='home') homeDiv.classList.remove('hidden');
  if(page==='list') renderList();
  if(page==='restaurant') renderRestaurant(index);
}

// جلب البيانات من Google Sheet
fetch(sheetURL)
  .then(res => res.json())
  .then(data => {
    offers = data.feed.entry.map(item => ({
      name: item.gsx$name.$t,
      offer: item.gsx$offer.$t,
      image: item.gsx$image.$t,
      insta: item.gsx$insta.$t,
      fb: item.gsx$fb.$t
    }));
  })
  .catch(err => console.error('خطأ في جلب العروض:', err));

function renderList(){
  listDiv.innerHTML = '<h1>قائمة المطاعم</h1>';
  if(offers.length===0){
    listDiv.innerHTML += '<p>جاري تحميل العروض...</p>';
  } else {
    offers.forEach((item, index)=>{
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <img src="${item.image}" alt="${item.name}">
        <h2>${item.name}</h2>
        <a href="#" class="btn" onclick="showPage('restaurant', ${index})">تفاصيل العرض</a>
      `;
      listDiv.appendChild(card);
    });
  }
  const back = document.createElement('a');
  back.href = '#';
  back.className = 'menu-btn';
  back.textContent = '⬅ العودة للصفحة الرئيسية';
  back.onclick = ()=>{ showPage('home'); };
  listDiv.appendChild(back);
  listDiv.classList.remove('hidden');
}

function renderRestaurant(index){
  const item = offers[index];
  restaurantDiv.innerHTML = `
    <div class="card">
      <img src="${item.image}" alt="${item.name}">
      <h1>${item.name}</h1>
      <p>${item.offer}</p>
      <div style="margin-top:8px;">
        <a href="${item.insta}" target="_blank" class="btn">Instagram</a>
        <a href="${item.fb}" target="_blank" class="btn">Facebook</a>
      </div>
    </div>
    <a href="#" class="menu-btn" onclick="showPage('list')">⬅ العودة لقائمة المطاعم</a>
    <a href="#" class="menu-btn" onclick="showPage('home')">⬅ العودة للصفحة الرئيسية</a>
  `;
  restaurantDiv.classList.remove('hidden');
}

showPage('home');
</script>
</body>
</html>